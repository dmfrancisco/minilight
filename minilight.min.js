const e={whitespace:0,operator:1,closingBrace:2,word:3,regex:4,stringDouble:5,stringSingle:6,stringTemplate:7,xmlComment:8,multiLineComment:9,singleLineCommentSlash:10,singleLineCommentHash:11},C=[e.xmlComment,e.multiLineComment,e.singleLineCommentSlash,e.singleLineCommentHash];export const defaultConfig={styles:{unformatted:"",punctuation:"opacity: 0.5",keyword:"font-weight: 600",string:"opacity: 0.7",comment:"font-style: italic; opacity: 0.5"},keywords:["abstract","alias","and","arguments","array","asm","assert","auto","base","begin","bool","boolean","break","byte","case","catch","char","checked","class","clone","compl","const","continue","debugger","decimal","declare","default","defer","deinit","delegate","delete","do","double","echo","elif","else","elseif","elsif","end","ensure","enum","event","except","exec","explicit","export","extends","extension","extern","fallthrough","false","final","finally","fixed","float","for","foreach","friend","from","func","function","global","goto","guard","if","implements","implicit","import","include","include_once","init","inline","inout","instanceof","int","interface","internal","is","lambda","let","lock","long","module","mutable","namespace","NaN","native","new","next","nil","not","null","object","operator","or","out","override","package","params","private","protected","protocol","public","raise","readonly","redo","ref","register","repeat","require","require_once","rescue","restrict","retry","return","sbyte","sealed","self","short","signed","sizeof","static","string","struct","subscript","super","switch","synchronized","template","then","this","throw","throws","transient","true","try","typealias","typedef","typeid","typename","typeof","unchecked","undef","undefined","union","unless","unsigned","until","use","using","var","virtual","void","volatile","wchar_t","when","where","while","with","xor","yield"]},minilight=(u,p={})=>{const s={...defaultConfig.styles,...p.styles},h=p.keywords||defaultConfig.keywords,o=u.textContent;let c=0,l=o[0],t=1,n,m,i="",r=e.whitespace,g,a;u.innerHTML="";const y=()=>{if(!t)return!0;switch(r){case e.whitespace:return/\S/.test(t);case e.operator:case e.closingBrace:return!0;case e.word:return!/[$\w]/.test(t);case e.regex:return(n==="/"||n===`
`)&&a;case e.stringDouble:return n==='"'&&a;case e.stringSingle:return n==="'"&&a;case e.stringTemplate:return n==="`"&&a;case e.xmlComment:return o[c-4]+m+n==="-->";case e.multiLineComment:return m+n==="*/";case e.singleLineCommentSlash:case e.singleLineCommentHash:return t===`
`}},w=()=>{switch(r){case e.whitespace:return s.unformatted;case e.operator:case e.closingBrace:return s.punctuation;case e.word:return h.includes(i)?s.keyword:s.unformatted;case e.regex:case e.stringDouble:case e.stringSingle:case e.stringTemplate:return s.string;case e.xmlComment:case e.multiLineComment:case e.singleLineCommentSlash:case e.singleLineCommentHash:return s.comment}},x=()=>t=="#"?e.singleLineCommentHash:t+l=="//"?e.singleLineCommentSlash:t+l=="/*"?e.multiLineComment:t+l+o[c+1]+o[c+2]=="<!--"?e.xmlComment:t=="`"?e.stringTemplate:t=="'"?e.stringSingle:t=='"'?e.stringDouble:t=="/"&&[e.whitespace,e.operator].includes(g)&&n!="<"?e.regex:/[$\w]/.test(t)?e.word:/[\])]/.test(t)?e.closingBrace:/[\/{}[(\-+*=<>:;|\\.,?!&@~]/.test(t)?e.operator:e.whitespace;for(;m=n,n=r<7&&n=="\\"?1:t;){if(t=l,l=o[++c],a=i.length>1,y()){if(i){const d=document.createElement("span"),f=w();f&&d.setAttribute("style",f),d.appendChild(document.createTextNode(i)),u.appendChild(d)}r!==e.whitespace&&!C.includes(r)&&(g=r),i="",r=x()}i+=t}};
